{% extends "base.html" %}

{% block title %}Trang chá»§ - Há»‡ thá»‘ng quáº£n lÃ½ sÃ¡ch{% endblock %}

{% block header %}ChÃ o má»«ng Ä‘áº¿n vá»›i Há»‡ thá»‘ng quáº£n lÃ½ sÃ¡ch{% endblock %}

{% block content %}
<div class="nav">
    <a href="/login">ÄÄƒng nháº­p</a>
    <a href="/register">ÄÄƒng kÃ½</a>
    <a href="/api/docs" target="_blank">ğŸ“š API Documentation</a>
</div>

<div class="card">
    <h3>Giá»›i thiá»‡u</h3>
    <p>Há»‡ thá»‘ng quáº£n lÃ½ sÃ¡ch RESTful API vá»›i kiáº¿n trÃºc phÃ¢n táº§ng theo cÃ¡c nguyÃªn táº¯c REST.</p>
    <p><strong>API tuÃ¢n thá»§ nguyÃªn táº¯c Client-Server Architecture:</strong></p>
    <ul>
        <li>TÃ¡ch biá»‡t rÃµ rÃ ng giá»¯a Client (Frontend) vÃ  Server (Backend API)</li>
        <li>Client gá»­i HTTP requests Ä‘áº¿n Server</li>
        <li>Server xá»­ lÃ½ logic vÃ  tráº£ vá» JSON responses</li>
        <li>Client vÃ  Server phÃ¡t triá»ƒn Ä‘á»™c láº­p</li>
    </ul>
</div>

<div class="card">
    <h3>CÃ¡c chá»©c nÄƒng</h3>
    <ul>
        <li>ğŸ“š Quáº£n lÃ½ sÃ¡ch (CRUD)</li>
        <li>ğŸ‘¥ Quáº£n lÃ½ ngÆ°á»i dÃ¹ng</li>
        <li>ğŸ“– MÆ°á»£n vÃ  tráº£ sÃ¡ch</li>
        <li>ğŸ“Š Xem lá»‹ch sá»­ mÆ°á»£n tráº£</li>
    </ul>
</div>

<div class="card">
    <h3>Demo API</h3>
    <button class="btn" onclick="testAPI()">Test API Connection</button>
    <a href="/api/docs" target="_blank" class="btn" style="margin-left: 10px; display: inline-block;">Má»Ÿ Swagger UI</a>
    <div id="apiResult" style="margin-top: 15px;"></div>
</div>

<div class="card">
    <h3>ğŸ“š OpenAPI/Swagger Documentation</h3>
    <p>Há»‡ thá»‘ng tÃ­ch há»£p Swagger UI Ä‘á»ƒ báº¡n cÃ³ thá»ƒ:</p>
    <ul>
        <li>Xem táº¥t cáº£ API endpoints vá»›i mÃ´ táº£ chi tiáº¿t</li>
        <li>Test API trá»±c tiáº¿p trÃªn trÃ¬nh duyá»‡t</li>
        <li>Xem request/response schema vÃ  examples</li>
        <li>Download OpenAPI specification cho Postman</li>
    </ul>
    <p style="margin-top: 15px;">
        <strong>Truy cáº­p:</strong> 
        <a href="/api/docs" target="_blank" style="color: #667eea;">http://localhost:5000/api/docs</a>
    </p>
</div>

<script>
async function testAPI() {
    const resultDiv = document.getElementById('apiResult');
    resultDiv.innerHTML = '<div class="loading">Äang kiá»ƒm tra káº¿t ná»‘i...</div>';
    
    try {
        const response = await fetch('http://localhost:5000/api');
        const data = await response.json();
        
        resultDiv.innerHTML = `
            <div class="alert alert-success">
                <strong>Káº¿t ná»‘i thÃ nh cÃ´ng!</strong><br>
                API Name: ${data.name}<br>
                Version: ${data.version}<br>
                Description: ${data.description_detail}
            </div>
        `;
    } catch (error) {
        resultDiv.innerHTML = `
            <div class="alert alert-error">
                <strong>Lá»—i káº¿t ná»‘i!</strong><br>
                ${error.message}<br>
                Vui lÃ²ng Ä‘áº£m báº£o server Ä‘ang cháº¡y táº¡i http://localhost:5000
            </div>
        `;
    }
}

// Check if user is logged in
window.onload = function() {
    const user = getCurrentUser();
    if (user) {
        window.location.href = user.role === 'admin' ? '/admin' : '/dashboard';
    }
};
</script>
{% endblock %}

